service:
  name: elasticsearch
  deployment:
    maximum_percent: 100
    minimum_healthy_percent: 0
  desired_count: 1

task:
  volumes:
    config: /etc/elasticsearch
    data: /data
    logs: /var/log/elasticsearch

  containers:
    elasticsearch:
      image: elasticsearch:5
      memory: 2048
      essential: True
      port_mappings:
        -
          host_port: 0
          container_port: 9200
          protocol: tcp
      mount_points:
        /usr/share/elasticsearch/config:
          source_volume: config
        /usr/share/elasticsearch/data:
          source_volume: db
        /usr/share/elasticsearch/logs:
          source_volume: logs

environments:
  prd:
    namespace: release
    service:
      cluster: prd-ecs-cluster
